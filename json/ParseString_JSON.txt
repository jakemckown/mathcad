(:= (@FUNCTION (@LABEL VARIABLE (@ID ParseString (@SUB JSON))) (@ARGS (@SEP (@LABEL VARIABLE JSON) (@LABEL VARIABLE Index)))) (@PROGRAM (@ASSIGN (@LABEL VARIABLE Index) (@APPLY (@LABEL VARIABLE (@ID SkipSpaces (@SUB JSON))) (@ARGS (@SEP (@LABEL VARIABLE JSON) (@LABEL VARIABLE Index))))) (@ASSIGN (@LABEL VARIABLE Quote) (@APPLY vec2str (@ARGS (@MATRIX 1 1 (@INDEX JSON Index))))) (@ASSIGN (@LABEL VARIABLE Index) (+ Index 1)) (@ASSIGN (@LABEL VARIABLE String) "") (@WHILE (@AND (@GEQ Index 0) (< Index (@APPLY rows (@ARGS JSON)))) (@BODY (@ASSIGN (@LABEL VARIABLE Char) (@APPLY vec2str (@ARGS (@MATRIX 1 1 (@INDEX JSON Index))))) (@IF (@EQ Char "\\") (@BODY (@ASSIGN (@LABEL VARIABLE Index) (+ Index 1)) (@ASSIGN (@LABEL VARIABLE Char) (@APPLY vec2str (@ARGS (@MATRIX 1 1 (@INDEX JSON Index))))) (@IF (@OR (@OR (@OR (@EQ Char "\"") (@EQ Char "'")) (@EQ Char "\\")) (@EQ Char "\\\\")) (@BODY (@ASSIGN (@LABEL VARIABLE String) (@APPLY concat (@ARGS (@SEP String Char))))) (@EQ Char "u") (@BODY (@ASSIGN (@LABEL VARIABLE Code) (@APPLY vec2str (@ARGS (@APPLY (@LABEL FUNCTION submatrix) (@ARGS (@SEP (@SEP (@SEP (@SEP JSON (+ Index 1)) (+ Index 4)) 0) 0)))))) (@ASSIGN (@LABEL VARIABLE String) (@APPLY concat (@ARGS (@SEP String (@APPLY Unicode (@ARGS (@LABEL VARIABLE Code))))))) (@ASSIGN (@LABEL VARIABLE Index) (+ Index 4))) (@BODY (@ASSIGN (@LABEL VARIABLE EscapedChars) (@MATRIX 5 2 "b" (@MATRIX 1 1 8) "f" (@MATRIX 1 1 12) "n" (@MATRIX 2 1 13 10) "r" (@MATRIX 1 1 13) "t" (@MATRIX 1 1 9))) (@ASSIGN (@LABEL VARIABLE String) (@APPLY concat (@ARGS (@SEP String (@APPLY vec2str (@ARGS (@INDEX (@APPLY (@LABEL FUNCTION vlookup) (@ARGS (@SEP (@SEP Char (@LABEL VARIABLE EscapedChars)) 1))) 0))))))))) (@ASSIGN (@LABEL VARIABLE Index) (+ Index 1))) (@EQ Char Quote) (@BODY (@ASSIGN (@LABEL VARIABLE Index) (+ Index 1)) @BREAK) (@BODY (@ASSIGN (@LABEL VARIABLE String) (@APPLY concat (@ARGS (@SEP String Char)))) (@ASSIGN (@LABEL VARIABLE Index) (+ Index 1)))))) (@RETURN (@MATRIX 2 1 (@LABEL VARIABLE String) Index))))