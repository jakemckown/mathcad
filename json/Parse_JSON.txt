(:= (@FUNCTION (@LABEL VARIABLE (@ID Parse (@SUB JSON))) (@ARGS (@LABEL VARIABLE JSON))) (@PROGRAM (@IF (@APPLY (@LABEL FUNCTION IsString) (@ARGS JSON)) (@BODY (@ASSIGN (@LABEL VARIABLE JSON) (@APPLY (@LABEL FUNCTION str2vec) (@ARGS JSON))))) (@ASSIGN (@LABEL VARIABLE InvalidChars) (@MATRIX 3 1 9 10 13)) (@ASSIGN (@LABEL VARIABLE CleanJSON) (@MATRIX 1 1 0)) (@FOR (@LABEL VARIABLE Index) (@RANGE 0 (@APPLY last (@ARGS JSON))) (@BODY (@TRY (@BODY (@APPLY (@LABEL FUNCTION match) (@ARGS (@SEP (@INDEX JSON (@LABEL VARIABLE Index)) (@LABEL VARIABLE InvalidChars))))) (@BODY (@ASSIGN (@LABEL VARIABLE CleanJSON) (@APPLY (@LABEL FUNCTION stack) (@ARGS (@SEP CleanJSON (@INDEX JSON (@LABEL VARIABLE Index)))))))))) (@ASSIGN (@LABEL VARIABLE JSON) (@APPLY (@LABEL FUNCTION submatrix) (@ARGS (@SEP (@SEP (@SEP (@SEP CleanJSON 1) (@APPLY last (@ARGS CleanJSON))) 0) 0)))) (@ASSIGN (@LABEL VARIABLE Index) 0) (@ASSIGN (@LABEL VARIABLE Index) (@APPLY (@LABEL VARIABLE (@ID SkipSpaces (@SUB JSON))) (@ARGS (@SEP (@LABEL VARIABLE JSON) (@LABEL VARIABLE Index))))) (@IF (@OR (@EQ (@INDEX JSON Index) 123) (@EQ (@INDEX JSON Index) 91)) (@BODY (@ASSIGN (@MATRIX 2 1 (@LABEL VARIABLE Value) (@LABEL VARIABLE Index)) (@APPLY (@ID ParseValue (@SUB JSON)) (@ARGS (@SEP JSON Index)))) (@RETURN (@LABEL VARIABLE Value))) (@BODY (@ASSIGN (@LABEL VARIABLE Error) "Expecting '{' or '['") (@RETURN (@APPLY error (@ARGS (@APPLY (@LABEL VARIABLE (@ID ParseError (@SUB JSON))) (@ARGS (@SEP (@SEP (@LABEL VARIABLE JSON) (@LABEL VARIABLE Index)) (@LABEL VARIABLE Error)))))))))))